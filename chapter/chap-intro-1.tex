
\chapter{绪论}
\label{chap:introduction}
\section{研究背景及意义}
中国互联网络信息中心（CNNIC）发布的第~33~次《中国互联网络发展状况统计报告》显示，截至~2013~年~12~月，我国网民规模达到~6.18~ 亿，全年新增网民~5358~万人，互联网普及率为~45.8\%~。在3G网络进一步普及、智能手机和无线网络持续发展的背景下，视频、音乐等高流量应用拥有越来越多的用户。截至~2013~年~12~月，我国手机端在线收看或下载视频的用户数为~2.47~亿，与~2012~年底相比增长了~1.12~亿，增长率高达~83.8\%~，在手机类应用用户规模增长幅度统计中排名第一。因此，互联网音频、视频等多媒体业务具有较强的研究价值和广阔的市场前景。
\par
随着海量数据需求的日益增加，云计算技术以及海量数据处理技术得到越来越多的关注和重视。云计算可以算是个人电脑、互联网后的又一个革命性技术，它彻底改变了我们使用信息技术的方式。时至今日，云计算的影响力已经席卷了~IT~行业的各个角落。~Salesforce.com~是现在公认的云计算先驱，主要向企业客户销售基于云的~SaaS~软件及服务产品，CRM。 ~Salesforce.com~ 对云计算产业的重要意义不仅在于它通过销售~SaaS~ 服务，成长为一家年销售额超过~20~亿美元的公司，更重要的是~Salesforce.com~第一次将~SaaS~服务大规模地销售给了企业用户，进一步证明了基于云的服务不仅仅是大型业务系统的的廉价替代品，它还可以是真正提高企业运营效率、促进业务发展的解决方案，并维持极高标准的可靠性。
\par
在线零售商~Amazon~为提高用户体验，配置了大量服务器设备以缓冲圣诞购物季的高峰时段流量，从而导致数据中心在大部分时间只有不到10\% 的利用率，剩下90\%的资源都是闲置的。因此，~Amazon~于~2006~年对外发布了~EC2~弹性云计算服务，面向公众提供基础架构的云服务~IaaS~。~EC2~是云计算的一个里程碑，它是业界第一个将基础架构大规模开放给公众用户的云计算服务，用户可以在~EC2~平台上搭建从~Linux~ 到~Windows~的任何业务，而且只需根据业务的实际需求使用服务并支付费用。除了~EC2~ 之外，~Amazon~还发布了~S3、SQS~等云计算服务，组成了完整的~AWS~产品线。
\par
继~Amazon AWS~之后，各大厂商都涌进云计算的大潮中，各种类似的云计算产品开始层出不穷地出现。~2009~年，~Google~开始对外提供~Google App Engine~服务，也就是平台即服务的~PaaS~云服务，提供了完整的~WEB~开发环境，用户可以在浏览器里面开发和调试自己的代码，并直接部署到~Google~云平台上，并对外发布服务。紧接着，~Microsoft~也发布了~Windows Azure~，又一个云计算的平台即服务~PaaS~。
\par
对用户而言，可以从各种各样的云计算服务中选择购买，并按需支付费用。还有一个可选方案是将已购置的物理设备搭建成云服务平台，服务业务的同时将闲置的资源开放出去，最大化物理资源的利用率。目前，构建云服务平台的虚拟化管理系统层出不穷，譬如~OpenStack、Eucalyptus、OpenNebula、CloudStack~等。
\par
对于目前的虚拟化管理系统，大多是面向硬件资源共享，然而，在实际应用中，许多独立的服务被常常使用，譬如多媒体业务的存储、转码、流化服务，因此，如果将这些服务作为基本服务单元，一方面可以使其可以更好的为不同系统提供高质量服务，另一方面将硬件资源通过多服务类型虚拟，提高了利用率，降低了部署和运营成本，应用和研究价值均较强，因此，我们拟对面向媒体业务的虚拟化网络服务进行研究。

\section{研究内容及面临的挑战}
随着用户的不断增多，服务提供商常常需要部署服务器集群的方式对用户提供可靠服务。由于各种业务应用的飞速发展，如果每个应用都通过大量部署设备来实现，一方面给服务提供商带来了很大的设备成本和部署压力，另一方面，大量设备无法充分利用，也带来了资源的巨大浪费。因此，虚拟化技术得到了越来越多的关注。虚拟化技术通过建立统一的资源管控系统，管理所有的设备，对设备进行虚拟化，按需为业务分配资源。
\par
\begin{figure}[h]
\includegraphics[width=\textwidth]{supernova-jiagou.eps}
\caption{SuperNova系统架构示意图}
\label{fig:supernova-jiagou1}
\end{figure}
\par
本课题以~863~项目“融合网络业务体系的开发”中服务虚拟化平台~SuperNova~为依托开展研究和开发。服务虚拟化平台~SuperNova~的架构示意图如图\ref{fig:supernova-jiagou1}所示。服务虚拟化平台~SuperNova~提供一种基于服务虚拟化、具有云服务特征、开放接口的网络系统及实现方法，通过将分布在不同地理位置的物理设备连接起来，采用虚拟化技术以大粒度服务的形式对外提供资源，从而达到多种业务共享硬件资源，满足用户对媒体业务的服务质量要求。
服务虚拟化平台~SuperNova~将物理设备层进行屏蔽，根据服务和应用层的需求，以接口的方式为其提供服务，应用无需了解网络细节和硬件情况，可根据需求获得弹性服务。按照功能划分，服务虚拟化平台包括：虚拟连接层、虚拟独立服务单元层、服务协作层、服务控制层和全局认知管理层。
\par
本课题将在服务虚拟化平台~SuperNova~上开展研究和开发工作，本课题的研究和开发工作主要集中在服务控制层和全局认知管理层。本课题的研究内容及面临的挑战可归结为以下几个方面：\par
\textbf{1）虚拟网络嵌入}\par
虚拟网络嵌入是网络虚拟化的关键内容，通过在共享的物理网络上实例化虚拟网络，有效地将虚拟网络请求拓扑中的虚拟节点和虚拟链接嵌入映射到底层物理网络上，最大化从底层物理网络中获得的收益，获取最佳的动态资源分配，从而为最终用户提供定制的端到端保证的服务。虚拟网络嵌入问题是~NP~难问题，其时间复杂度非常高，所以，现有的研究大多都侧重于设计基于启发式的算法来解决。然而，这些现有的启发式算法均不适合服务虚拟化平台，也没有充分利用服务虚拟化平台~SuperNova~的独有特征。因此，在服务虚拟化平台~SuperNova~ 中，设计符合平台特性的虚拟网络嵌入算法是需要考虑的问题。如何对虚拟网络嵌入问题进行建模；如何挖掘服务虚拟化平台的独有特征；如何减少虚拟网络嵌入的时间复杂度以及如何提高底层物理网络的资源利用率等都是值得研究的问题。
\par
\textbf{2）网络流量控制}\par
网络流量控制，即是通过利用软件或硬件工具，实现对计算机网络流量的控制。网络流量控制最主要的方法是引入~QoS~的概念，通过为不同类型的网络数据包标记，并决定不同标记的数据包通行的优先次序。主要的流量控制方式包括流量整形、流量调度、流量监管和丢弃。在服务虚拟化平台~SuperNova~中，由于汇集了成千上万的服务器资源，因此，如何设计流量控制是很关键的问题。如何设计流量控制系统的架构；采用何种流量控制工具；如何划分不同的流量以及如何控制流量等都是值得研究的问题。
\par
\textbf{3）服务虚拟化平台功能实现}\par
不管是虚拟网络嵌入还是网络流量控制，其理论研究和工程实现都是有很大差距的。理论研究注重准确性和高性能，然而，在工程开发和实现上，更加注重可行性和高效率。因此，如何在服务虚拟化平台上高效率地实现高性能的虚拟网络嵌入算法，需要在哪些方面和细节进行简化等都是需要仔细推敲和琢磨的。网络流量控制模块的工程开发实现也是如此。另外，作为对外开放使用的系统平台，用户体验也是至关重要的。因此，如何进行呈现设计，提高用户体验质量也是值得考虑的问题。

\section{本文主要贡献}
本文面向媒体业务的虚拟化网络服务设计与开发的主要贡献可归结为以下几点：\par
\textbf{1、面向媒体业务的虚拟网络嵌入算法~MSO-VNE~}\par
本文结合服务虚拟化平台的应用场景和平台特性，设计并提出了面向媒体业务的虚拟网络嵌入算法~MSO-VNE~，该算法根据虚拟网络请求和底层物理网络的地理位置特征，应用节点聚类算法，充分利用了分而治之思想和并发处理思想的优势，显著地降低虚拟网络嵌入处理的时间复杂度。另外，该算法引入了动态服务均衡分析，充分考虑了节点在网络拓扑中的重要性，显著提高了虚拟网络嵌入的性能和底层物理网络的收益。
\par
\textbf{2、面向媒体业务的资源映射交互框架}\par
本文基于面向媒体业务的虚拟网络嵌入算法~MSO-VNE~，提出了面向媒体业务的资源映射交互框架。在该资源映射交互框架中，~MSO-VNE~算法作为资源映射核心组件模块以获得更好的~QoS~服务质量和更好的用户体验质量。
\par
\textbf{3、业务流量隔离与控制系统}\par
本文基于~Linux~流量控制模块~TC~设计了多层次结构的业务流量隔离与控制系统。通过封装~Linux TC~的控制命令，简化了用户操作，提高了用户体验。另外，通过开放一定的控制接口~API~，用户可以根据实际业务的需要对流量控制模块进行适当调整。业务流量隔离与控制系统可以有效地隔离不同用户之间的业务流量干扰，也为用户提供了一种区分不同业务的工具。
\par
\textbf{4、服务虚拟化平台的功能实现}\par
服务虚拟化平台的功能实现主要包括三个部分：首先是虚拟网络嵌入算法在服务虚拟化平台中的工程实现；其次是业务流量隔离与控制系统在服务虚拟化平台中的工程实现；最后是为提高用户体验而附加的部分功能实现。
\section{本文内容安排}
本文共分为六章，对面向媒体业务的虚拟化网络服务进行研究和开发，其中第三、四、五章是本文的核心研究内容。本文各章的内容概述如下：\par
第一章为“绪论”，介绍了本文的研究背景、研究意义、研究内容及面临的挑战，另外，还描述了本文的主要贡献。
\par
第二章为“相关技术背景及技术基础”，介绍了面向媒体业务的虚拟化网络服务相关的技术，如云计算技术、虚拟化技术以及网络流量控制技术，这些相关技术为本文的研究做了必要的准备和技术支持。
\par
第三章为“面向媒体业务的虚拟网络嵌入研究”。本章通过研究面向媒体业务的虚拟化平台的特性，提出了面向媒体业务的虚拟网络嵌入算法~MSO-VNE~，并通过仿真实验验证了该算法的性能。另外，本章基于~MSO-VNE~算法，设计了面向媒体业务的资源映射交互框架，以简化资源映射交互流程并提高用户体验。
\par
第四章为“业务流量隔离控制”，解决了业务之间的流量干扰问题，实现了业务流量的隔离和控制。本章基于~Linux TC~流量控制模块，设计了业务流量隔离和控制框架，并设计仿真实验验证了其隔离和控制性能。
\par
第五章为“~SuperNova~系统工程开发”。本章详细阐述了在服务虚拟化平台~SuperNova~上实现流量控制模块、虚拟网络嵌入模块、云控制器模块的方案设计与编程开发。
\par
第六章为“总结和展望”，总结了本文的研究工作，并指出了面向媒体业务的虚拟化网络服务的进一步研究方向。